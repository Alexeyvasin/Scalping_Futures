[2025-02-20 03:40:38,832] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection reset (An existing connection was forcibly closed by the remote host.\r\n -- 10054)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=42, message=None))
[2025-02-20 03:40:38,855] [INFO] Will retry after 60 seconds...
[2025-02-20 09:17:12,493] [INFO] [start] It`s starting...
[2025-02-20 09:17:12,493] [INFO] -----------------------------
[2025-02-20 09:17:14,923] [INFO] [get_data] Last operation Operation(id='2041006194641877500', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-377, nano=-270000000), price=MoneyValue(currency='pt.', units=4, nano=172000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 19, 16, 21, 0, 343235, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641863114', date_time=datetime.datetime(2025, 2, 19, 16, 21, 0, 343235, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=172000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 09:17:14,924] [INFO] [get_data]. Price of last operation: 4.17200000
[2025-02-20 09:17:14,926] [INFO] [futures_quantity] 0
[2025-02-20 09:17:14,926] [INFO] [orders_prices] ()
[2025-02-20 09:17:23,112] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:23,224] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:23,622] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:25,176] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:25,279] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:27,607] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:31,020] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:34,920] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:36,328] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:36,432] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:37,682] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:38,445] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:39,176] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:42,090] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:46,756] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:47,639] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:17:51,640] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:03,196] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:03,298] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:12,021] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:12,187] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:14,370] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:14,472] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:14,864] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:14,966] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:15,181] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:15,283] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:15,594] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:15,750] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:16,200] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:16,299] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:20,601] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:20,701] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:24,173] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:24,280] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:28,891] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:30,973] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:31,612] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:31,788] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:32,859] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:32,958] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:33,737] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:34,314] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:34,419] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:34,577] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:35,875] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:38,219] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:38,657] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:39,115] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:39,712] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:40,290] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:41,181] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:45,150] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:46,705] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:46,812] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:46,954] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:18:55,337] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:00,284] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:07,575] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:07,677] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:11,047] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:15,035] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:17,572] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:17,673] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:18,724] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:18,905] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:19,218] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:21,087] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:25,350] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:27,778] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:29,174] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:30,019] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:30,121] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:30,848] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:31,161] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:31,284] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:35,281] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:36,140] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:37,425] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:40,853] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:47,377] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:47,479] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:47,671] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:47,845] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:49,492] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:51,998] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:19:53,381] [INFO] Not enough data for EMA calculations.
[2025-02-20 09:26:56,273] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:56,276] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:56.276430+00:00
[2025-02-20 09:26:56,376] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:56,376] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:56.376384+00:00
[2025-02-20 09:26:58,402] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:58,402] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:58.402401+00:00
[2025-02-20 09:26:58,507] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:58,507] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:58.507884+00:00
[2025-02-20 09:26:59,029] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:59,029] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:59.029418+00:00
[2025-02-20 09:26:59,174] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:59,174] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:59.174078+00:00
[2025-02-20 09:26:59,375] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:26:59,375] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:26:59.375251+00:00
[2025-02-20 09:27:04,089] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:04,089] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:04.089051+00:00
[2025-02-20 09:27:04,190] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:04,190] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:04.190469+00:00
[2025-02-20 09:27:06,224] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:06,224] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:06.224377+00:00
[2025-02-20 09:27:09,324] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:09,324] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:09.324153+00:00
[2025-02-20 09:27:09,428] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:09,428] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:09.428454+00:00
[2025-02-20 09:27:11,919] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:11,920] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:11.920204+00:00
[2025-02-20 09:27:12,021] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:12,021] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:12.021954+00:00
[2025-02-20 09:27:14,011] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:14,011] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:14.011406+00:00
[2025-02-20 09:27:14,112] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:14,112] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:14.112033+00:00
[2025-02-20 09:27:14,344] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:14,344] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:14.344067+00:00
[2025-02-20 09:27:14,445] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:14,445] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:14.445353+00:00
[2025-02-20 09:27:19,294] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:19,294] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:19.294660+00:00
[2025-02-20 09:27:19,393] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 09:27:19,393] [INFO] [o_p_w_s] not trading time. Now is 2025-02-20 06:27:19.393960+00:00
[2025-02-20 10:23:30,165] [INFO] [events_orders] order 6744032f-e7c3-4463-b35d-74dd707ad354 HAPPENED!
[2025-02-20 10:23:30,168] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='ced7d480-e388-4fe1-952b-ac678a08dbdb', order_request_id='6744032f-e7c3-4463-b35d-74dd707ad354', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=213000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=380, nano=980000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 10:23:30,248] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='6744032f-e7c3-4463-b35d-74dd707ad354', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='ced7d480-e388-4fe1-952b-ac678a08dbdb')
[2025-02-20 10:23:33,873] [INFO] [get_data] Last operation Operation(id='2041006194642123794', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=382, nano=160000000), price=MoneyValue(currency='pt.', units=4, nano=226000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 7, 23, 30, 106678, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641872815', date_time=datetime.datetime(2025, 2, 20, 7, 23, 30, 106678, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=226000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 10:23:33,875] [INFO] [get_data]. Price of last operation: 4.22600000
[2025-02-20 10:23:33,876] [INFO] [futures_quantity] -1
[2025-02-20 10:23:33,876] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=226000000),)
[2025-02-20 10:23:35,579] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='3357587c-43a8-40c5-9af0-bb71909e7d0f', order_request_id='', response_metadata=ResponseMetadata(tracking_id='c0e136edd86431f4907d3abfd0697717', server_time=datetime.datetime(2025, 2, 20, 7, 23, 35, 467556, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='8b09700b-f1e0-41ab-a333-dea5df56cb65', order_request_id='', response_metadata=ResponseMetadata(tracking_id='c3ee1366d21052ef3d76ec5676b92fb9', server_time=datetime.datetime(2025, 2, 20, 7, 23, 35, 522704, tzinfo=datetime.timezone.utc))))
[2025-02-20 10:25:35,611] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 10:25:35,612] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 10:25:35,612] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 10:49:48,819] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 10:49:48,819] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='3357587c-43a8-40c5-9af0-bb71909e7d0f', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=217000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=381, nano=340000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 10:49:52,463] [INFO] [get_data] Last operation Operation(id='2041006194642123794', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=382, nano=160000000), price=MoneyValue(currency='pt.', units=4, nano=226000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 7, 23, 30, 106678, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641872815', date_time=datetime.datetime(2025, 2, 20, 7, 23, 30, 106678, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=226000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-100000000))])
[2025-02-20 10:49:52,463] [INFO] [get_data]. Price of last operation: 4.22600000
[2025-02-20 10:49:52,463] [INFO] [futures_quantity] 0
[2025-02-20 10:49:52,464] [INFO] [orders_prices] ()
[2025-02-20 11:19:01,598] [INFO] [events_orders] order cff7844c-6492-4786-8cdc-3b6e63286be5 HAPPENED!
[2025-02-20 11:19:01,598] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='6b5542a1-87d4-40b1-98c8-66baf5698920', order_request_id='cff7844c-6492-4786-8cdc-3b6e63286be5', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=218000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=381, nano=430000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 11:19:01,671] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='cff7844c-6492-4786-8cdc-3b6e63286be5', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='6b5542a1-87d4-40b1-98c8-66baf5698920')
[2025-02-20 11:19:05,401] [INFO] [get_data] Last operation Operation(id='2041006194642137129', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=382, nano=610000000), price=MoneyValue(currency='pt.', units=4, nano=231000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 8, 19, 1, 569084, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641873915', date_time=datetime.datetime(2025, 2, 20, 8, 19, 1, 569084, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=231000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-100000000))])
[2025-02-20 11:19:05,401] [INFO] [get_data]. Price of last operation: 4.23100000
[2025-02-20 11:19:05,402] [INFO] [futures_quantity] -1
[2025-02-20 11:19:05,402] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=231000000),)
[2025-02-20 11:19:06,924] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='8dab605f-2e81-4e5f-aa01-e0d19e147763', order_request_id='', response_metadata=ResponseMetadata(tracking_id='d2e13d346f73665abff515afe88d56d8', server_time=datetime.datetime(2025, 2, 20, 8, 19, 6, 895440, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='e625c420-e4b8-4bb3-9aa8-d159c718ae09', order_request_id='', response_metadata=ResponseMetadata(tracking_id='3f04e77e0be34e5da951a4c9059c19b8', server_time=datetime.datetime(2025, 2, 20, 8, 19, 6, 867508, tzinfo=datetime.timezone.utc))))
[2025-02-20 11:21:06,929] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 11:33:28,158] [INFO] It`S NEED TO CLOSE POSITIONS! RSI = 18.039184013395584
[2025-02-20 11:33:28,598] [INFO] [events_orders] order 22fdb224-895a-42ec-888e-c19cf7cb871b HAPPENED!
[2025-02-20 11:33:28,598] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='fa1db138-8845-4c04-a333-c71591ced4ef', order_request_id='22fdb224-895a-42ec-888e-c19cf7cb871b', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=229000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=382, nano=430000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 11:33:28,630] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='22fdb224-895a-42ec-888e-c19cf7cb871b', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='fa1db138-8845-4c04-a333-c71591ced4ef')
[2025-02-20 11:33:32,266] [INFO] [get_data] Last operation Operation(id='2041006194642137129', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=382, nano=610000000), price=MoneyValue(currency='pt.', units=4, nano=231000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 8, 19, 1, 569084, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641873915', date_time=datetime.datetime(2025, 2, 20, 8, 19, 1, 569084, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=231000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-100000000))])
[2025-02-20 11:33:32,266] [INFO] [get_data]. Price of last operation: 4.23100000
[2025-02-20 11:33:32,266] [INFO] [futures_quantity] 0
[2025-02-20 11:33:32,266] [INFO] [orders_prices] ()
[2025-02-20 11:33:33,650] [INFO] [bot.futures_quantity] = 0. stops not applied
[2025-02-20 12:48:14,066] [INFO] [events_orders] order 2bdc4206-dc6d-424a-ae95-bf3e72b5d886 HAPPENED!
[2025-02-20 12:48:14,076] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='3f92716c-76fd-4ce5-a83d-944dad56061f', order_request_id='2bdc4206-dc6d-424a-ae95-bf3e72b5d886', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=181000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=378, nano=90000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 12:48:14,199] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='2bdc4206-dc6d-424a-ae95-bf3e72b5d886', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='3f92716c-76fd-4ce5-a83d-944dad56061f')
[2025-02-20 12:48:17,739] [INFO] [get_data] Last operation Operation(id='2041006194642167037', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=379, nano=260000000), price=MoneyValue(currency='pt.', units=4, nano=194000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 9, 48, 14, 43470, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641876170', date_time=datetime.datetime(2025, 2, 20, 9, 48, 14, 43470, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=194000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 12:48:17,740] [INFO] [get_data]. Price of last operation: 4.19400000
[2025-02-20 12:48:17,740] [INFO] [futures_quantity] -1
[2025-02-20 12:48:17,740] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=194000000),)
[2025-02-20 12:48:19,553] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='c99562d0-6061-4c99-a1ba-48d679db5570', order_request_id='', response_metadata=ResponseMetadata(tracking_id='6f9019eda6517345bbe6e99493ae48df', server_time=datetime.datetime(2025, 2, 20, 9, 48, 19, 455194, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='80617367-3704-4640-afeb-f0cbe2ce0696', order_request_id='', response_metadata=ResponseMetadata(tracking_id='e5bb4d3a4906eafdcccd6c53bd6c08d9', server_time=datetime.datetime(2025, 2, 20, 9, 48, 19, 509155, tzinfo=datetime.timezone.utc))))
[2025-02-20 12:50:19,550] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 12:50:19,550] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 12:50:19,551] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 13:09:10,780] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 13:09:10,780] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='c99562d0-6061-4c99-a1ba-48d679db5570', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=183000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=378, nano=270000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:09:14,586] [INFO] [get_data] Last operation Operation(id='2041006194642167037', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=379, nano=260000000), price=MoneyValue(currency='pt.', units=4, nano=194000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 9, 48, 14, 43470, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641876170', date_time=datetime.datetime(2025, 2, 20, 9, 48, 14, 43470, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=194000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:09:14,587] [INFO] [get_data]. Price of last operation: 4.19400000
[2025-02-20 13:09:14,587] [INFO] [futures_quantity] 0
[2025-02-20 13:09:14,587] [INFO] [orders_prices] ()
[2025-02-20 13:15:16,470] [INFO] [rsi_subscriber]  Trying to BUY. quantity= 1.
[2025-02-20 13:15:16,816] [INFO] [events_orders] order e4045d3e-f6be-4eae-94fb-892a122da9e6 HAPPENED!
[2025-02-20 13:15:16,819] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='7a3c59fa-f962-4b3e-b7d4-cd67ee89e39a', order_request_id='e4045d3e-f6be-4eae-94fb-892a122da9e6', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=177000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=377, nano=730000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:15:16,886] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='e4045d3e-f6be-4eae-94fb-892a122da9e6', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='7a3c59fa-f962-4b3e-b7d4-cd67ee89e39a')
[2025-02-20 13:15:20,413] [INFO] [get_data] Last operation Operation(id='2041006194642177397', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-376, nano=-550000000), price=MoneyValue(currency='pt.', units=4, nano=164000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 10, 15, 16, 781780, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641876957', date_time=datetime.datetime(2025, 2, 20, 10, 15, 16, 781780, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=164000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:15:20,414] [INFO] [get_data]. Price of last operation: 4.16400000
[2025-02-20 13:15:20,414] [INFO] [futures_quantity] 1
[2025-02-20 13:15:20,414] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=164000000),)
[2025-02-20 13:15:22,151] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='13ea3c8b-8122-48aa-a08d-e6a6179af974', order_request_id='', response_metadata=ResponseMetadata(tracking_id='70c3c8796a4db7c298f3f39f9013398b', server_time=datetime.datetime(2025, 2, 20, 10, 15, 22, 119925, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='74f5defa-b696-4db9-b779-8dbbbc6813bc', order_request_id='', response_metadata=ResponseMetadata(tracking_id='57a8f0e7ed855e0ded877fea1156b1bb', server_time=datetime.datetime(2025, 2, 20, 10, 15, 22, 85419, tzinfo=datetime.timezone.utc))))
[2025-02-20 13:27:02,448] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 13:27:02,448] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='74f5defa-b696-4db9-b779-8dbbbc6813bc', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=138000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=374, nano=200000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:27:06,118] [INFO] [get_data] Last operation Operation(id='2041006194642182804', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=374, nano=920000000), price=MoneyValue(currency='pt.', units=4, nano=146000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 10, 27, 2, 423870, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641877330', date_time=datetime.datetime(2025, 2, 20, 10, 27, 2, 423870, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=146000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:27:06,118] [INFO] [get_data]. Price of last operation: 4.14600000
[2025-02-20 13:27:06,118] [INFO] [futures_quantity] 0
[2025-02-20 13:27:06,118] [INFO] [orders_prices] ()
[2025-02-20 13:51:01,882] [INFO] [events_orders] order 7f03e199-2de6-454c-bda0-7d37d7c2fa81 HAPPENED!
[2025-02-20 13:51:01,883] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='6593dc7e-7b43-4543-823f-df2bf773dc4e', order_request_id='7f03e199-2de6-454c-bda0-7d37d7c2fa81', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=144000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=374, nano=740000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:51:02,000] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='7f03e199-2de6-454c-bda0-7d37d7c2fa81', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='6593dc7e-7b43-4543-823f-df2bf773dc4e')
[2025-02-20 13:51:05,741] [INFO] [get_data] Last operation Operation(id='2041006194642190270', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=375, nano=920000000), price=MoneyValue(currency='pt.', units=4, nano=157000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 10, 51, 1, 869232, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641877839', date_time=datetime.datetime(2025, 2, 20, 10, 51, 1, 869232, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=157000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:51:05,742] [INFO] [get_data]. Price of last operation: 4.15700000
[2025-02-20 13:51:05,742] [INFO] [futures_quantity] -1
[2025-02-20 13:51:05,742] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=157000000),)
[2025-02-20 13:51:07,380] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='1d308167-449d-45e8-b666-0f3e2022629b', order_request_id='', response_metadata=ResponseMetadata(tracking_id='92e5adf2825d595da0ad998bbb5ba745', server_time=datetime.datetime(2025, 2, 20, 10, 51, 7, 330837, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='82b0bf7f-35ba-4530-ae9c-c77494f9e01e', order_request_id='', response_metadata=ResponseMetadata(tracking_id='3252ec550ab266302d55c14227e73509', server_time=datetime.datetime(2025, 2, 20, 10, 51, 7, 292536, tzinfo=datetime.timezone.utc))))
[2025-02-20 13:53:07,387] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 13:53:37,750] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 13:53:37,750] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='1d308167-449d-45e8-b666-0f3e2022629b', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=148000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=375, nano=100000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:53:41,669] [INFO] [get_data] Last operation Operation(id='2041006194642191488', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-375, nano=-10000000), price=MoneyValue(currency='pt.', units=4, nano=147000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 10, 53, 37, 720933, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641877927', date_time=datetime.datetime(2025, 2, 20, 10, 53, 37, 720933, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=147000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:53:41,669] [INFO] [get_data]. Price of last operation: 4.14700000
[2025-02-20 13:53:41,669] [INFO] [futures_quantity] 0
[2025-02-20 13:53:41,669] [INFO] [orders_prices] ()
[2025-02-20 13:53:45,357] [INFO] [events_orders] order a5eed945-677a-4090-90bb-b649698a3c0a HAPPENED!
[2025-02-20 13:53:45,357] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='1f38958e-c8fd-4c61-89c6-7f91178008d9', order_request_id='a5eed945-677a-4090-90bb-b649698a3c0a', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=132000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=373, nano=660000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 13:53:45,465] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='a5eed945-677a-4090-90bb-b649698a3c0a', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='1f38958e-c8fd-4c61-89c6-7f91178008d9')
[2025-02-20 13:53:49,195] [INFO] [get_data] Last operation Operation(id='2041006194642191488', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-375, nano=-10000000), price=MoneyValue(currency='pt.', units=4, nano=147000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 10, 53, 37, 720933, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641877927', date_time=datetime.datetime(2025, 2, 20, 10, 53, 37, 720933, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=147000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 13:53:49,195] [INFO] [get_data]. Price of last operation: 4.14700000
[2025-02-20 13:53:49,195] [INFO] [futures_quantity] -1
[2025-02-20 13:53:49,195] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=147000000),)
[2025-02-20 13:53:50,818] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='891bf85e-deac-46d9-949e-64579a947673', order_request_id='', response_metadata=ResponseMetadata(tracking_id='4650446da03b8a6c3e90e4c6c56df0b0', server_time=datetime.datetime(2025, 2, 20, 10, 53, 50, 736400, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='c9786304-8441-4c45-8bfe-7cf0b67e5331', order_request_id='', response_metadata=ResponseMetadata(tracking_id='61f20f1f1b0d30f4ad0113a925390e3f', server_time=datetime.datetime(2025, 2, 20, 10, 53, 50, 772987, tzinfo=datetime.timezone.utc))))
[2025-02-20 13:55:50,828] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 14:11:30,475] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 14:11:30,479] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='c9786304-8441-4c45-8bfe-7cf0b67e5331', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=173000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=377, nano=360000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 14:11:34,315] [INFO] [get_data] Last operation Operation(id='2041006194642194162', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-376, nano=-370000000), price=MoneyValue(currency='pt.', units=4, nano=162000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 11, 11, 30, 440287, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641878124', date_time=datetime.datetime(2025, 2, 20, 11, 11, 30, 440287, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=162000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 14:11:34,316] [INFO] [get_data]. Price of last operation: 4.16200000
[2025-02-20 14:11:34,317] [INFO] [futures_quantity] 0
[2025-02-20 14:11:34,318] [INFO] [orders_prices] ()
[2025-02-20 14:15:13,951] [INFO] [rsi_subscriber]  Trying to SELL. quantity= 1.
[2025-02-20 14:15:14,393] [INFO] [events_orders] order bb0ed2c1-ab99-4231-9a17-08f0f2da9a9a HAPPENED!
[2025-02-20 14:15:14,393] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='9f9c4a93-33a3-425a-913f-949aae5ac69f', order_request_id='bb0ed2c1-ab99-4231-9a17-08f0f2da9a9a', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=162000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=376, nano=370000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 14:15:14,484] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='bb0ed2c1-ab99-4231-9a17-08f0f2da9a9a', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='9f9c4a93-33a3-425a-913f-949aae5ac69f')
[2025-02-20 14:15:18,237] [INFO] [get_data] Last operation Operation(id='2041006194642196096', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=377, nano=550000000), price=MoneyValue(currency='pt.', units=4, nano=175000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 11, 15, 14, 374870, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641878294', date_time=datetime.datetime(2025, 2, 20, 11, 15, 14, 374870, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=175000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 14:15:18,237] [INFO] [get_data]. Price of last operation: 4.17500000
[2025-02-20 14:15:18,237] [INFO] [futures_quantity] -1
[2025-02-20 14:15:18,238] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=175000000),)
[2025-02-20 14:15:19,784] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='6ba3818a-57b7-4db7-821e-d946ed4d6c22', order_request_id='', response_metadata=ResponseMetadata(tracking_id='6ba9243ea11ade9df2075a8fa9693938', server_time=datetime.datetime(2025, 2, 20, 11, 15, 19, 753187, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='2c0a2b12-f2d1-4e3b-a9b2-783bbf6d7603', order_request_id='', response_metadata=ResponseMetadata(tracking_id='028be2af068bb6ab93a42747ff815438', server_time=datetime.datetime(2025, 2, 20, 11, 15, 19, 722675, tzinfo=datetime.timezone.utc))))
[2025-02-20 14:27:22,494] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection reset (An existing connection was forcibly closed by the remote host.\r\n -- 10054)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=598, ratelimit_reset=45, message=None))
[2025-02-20 14:27:22,495] [INFO] Will retry after 1 seconds...
[2025-02-20 14:27:23,566] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'DNS resolution failed for invest-public-api.tinkoff.ru: UNAVAILABLE: getaddrinfo: WSA Error (No such host is known.\r\n -- 11001)', None)
[2025-02-20 14:27:23,566] [INFO] Will retry after 2.325905678137927 seconds...
[2025-02-20 14:27:34,202] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:27:34,202] [INFO] Will retry after 4.736606440291453 seconds...
[2025-02-20 14:27:40,185] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:27:40,185] [INFO] Will retry after 9.813692423674926 seconds...
[2025-02-20 14:27:50,267] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:27:50,267] [INFO] Will retry after 19.923466746528096 seconds...
[2025-02-20 14:28:10,379] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:28:10,380] [INFO] Will retry after 40.15151958382693 seconds...
[2025-02-20 14:28:50,654] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:28:50,654] [INFO] Will retry after 60 seconds...
[2025-02-20 14:29:50,788] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:29:50,788] [INFO] Will retry after 60 seconds...
[2025-02-20 14:31:11,234] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: tcp handshaker shutdown', None)
[2025-02-20 14:31:11,235] [INFO] Will retry after 60 seconds...
[2025-02-20 14:32:12,384] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'failed to connect to all addresses; last error: UNKNOWN: ipv4:185.65.149.161:443: Ssl handshake failed (TSI_PROTOCOL_FAILURE): SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED: self signed certificate', None)
[2025-02-20 14:32:12,384] [INFO] Will retry after 60 seconds...
[2025-02-20 14:34:16,645] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection aborted (An established connection was aborted by the software in your host machine.\r\n -- 10053)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=47, message=None))
[2025-02-20 14:34:16,646] [INFO] Will retry after 60 seconds...
[2025-02-20 14:36:45,385] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection timed out (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.\r\n -- 10060)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=43, message=None))
[2025-02-20 14:36:45,386] [INFO] Will retry after 60 seconds...
[2025-02-20 14:39:39,091] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection timed out (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.\r\n -- 10060)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=15, message=None))
[2025-02-20 14:39:39,092] [INFO] Will retry after 60 seconds...
[2025-02-20 14:40:39,091] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'DNS resolution failed for invest-public-api.tinkoff.ru: UNAVAILABLE: getaddrinfo: WSA Error (No such host is known.\r\n -- 11001)', None)
[2025-02-20 14:40:39,091] [INFO] Will retry after 60 seconds...
[2025-02-20 14:41:39,138] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'DNS resolution failed for invest-public-api.tinkoff.ru: UNAVAILABLE: getaddrinfo: WSA Error (No such host is known.\r\n -- 11001)', None)
[2025-02-20 14:41:39,139] [INFO] Will retry after 60 seconds...
[2025-02-20 14:55:21,969] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection reset (An existing connection was forcibly closed by the remote host.\r\n -- 10054)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=21, message=None))
[2025-02-20 14:55:21,969] [INFO] Will retry after 60 seconds...
[2025-02-20 14:57:06,286] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection timed out (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.\r\n -- 10060)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=38, message=None))
[2025-02-20 14:57:06,286] [INFO] Will retry after 60 seconds...
[2025-02-20 15:08:01,884] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection aborted (An established connection was aborted by the software in your host machine.\r\n -- 10053)', Metadata(tracking_id=None, ratelimit_limit='100, 100;w=60', ratelimit_remaining=99, ratelimit_reset=54, message=None))
[2025-02-20 15:08:01,885] [INFO] Will retry after 60 seconds...
[2025-02-20 15:28:02,945] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNKNOWN: (2, 'unknown')>, 'Stream removed', Metadata(tracking_id=None, ratelimit_limit='100, 100;w=60', ratelimit_remaining=99, ratelimit_reset=58, message=None))
[2025-02-20 15:28:02,945] [INFO] Will retry after 60 seconds...
[2025-02-20 16:11:36,495] [INFO] It`S NEED TO CLOSE POSITIONS! RSI = 19.842239150889384
[2025-02-20 16:11:37,098] [INFO] [events_orders] order 38613692-d7fd-48a0-bd1d-973ca7b31196 HAPPENED!
[2025-02-20 16:11:37,098] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='e08be99f-206d-44f6-a4b7-b663fc117e8f', order_request_id='38613692-d7fd-48a0-bd1d-973ca7b31196', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=152000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=375, nano=470000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 16:11:37,174] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='38613692-d7fd-48a0-bd1d-973ca7b31196', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='e08be99f-206d-44f6-a4b7-b663fc117e8f')
[2025-02-20 16:11:40,781] [INFO] [get_data] Last operation Operation(id='2041006194642286741', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-374, nano=-110000000), price=MoneyValue(currency='pt.', units=4, nano=137000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 13, 11, 37, 79838, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641881727', date_time=datetime.datetime(2025, 2, 20, 13, 11, 37, 79838, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=137000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 16:11:40,782] [INFO] [get_data]. Price of last operation: 4.13700000
[2025-02-20 16:11:40,782] [INFO] [futures_quantity] 1
[2025-02-20 16:11:40,782] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=137000000),)
[2025-02-20 16:11:42,497] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='05d5f4e0-3c68-4e7c-b797-2079a290f6b3', order_request_id='', response_metadata=ResponseMetadata(tracking_id='df78d33cc3a4f98ebf539fca1f114d61', server_time=datetime.datetime(2025, 2, 20, 13, 11, 42, 516234, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='1beb2dfc-3f1a-40fa-869f-60e3911ff242', order_request_id='', response_metadata=ResponseMetadata(tracking_id='9595ac68039012460a9ff502b53a5e8c', server_time=datetime.datetime(2025, 2, 20, 13, 11, 42, 471370, tzinfo=datetime.timezone.utc))))
[2025-02-20 16:12:29,887] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 16:12:29,887] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='1beb2dfc-3f1a-40fa-869f-60e3911ff242', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=111000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=371, nano=760000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 16:12:33,819] [INFO] [get_data] Last operation Operation(id='2041006194642289731', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=372, nano=750000000), price=MoneyValue(currency='pt.', units=4, nano=122000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 13, 12, 29, 867742, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641881940', date_time=datetime.datetime(2025, 2, 20, 13, 12, 29, 867742, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=122000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 16:12:33,819] [INFO] [get_data]. Price of last operation: 4.12200000
[2025-02-20 16:12:33,820] [INFO] [futures_quantity] 0
[2025-02-20 16:12:33,820] [INFO] [orders_prices] ()
[2025-02-20 16:44:11,001] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection aborted (An established connection was aborted by the software in your host machine.\r\n -- 10053)', Metadata(tracking_id=None, ratelimit_limit='600, 600;w=60', ratelimit_remaining=599, ratelimit_reset=57, message=None))
[2025-02-20 16:44:11,002] [INFO] Will retry after 60 seconds...
[2025-02-20 17:16:02,333] [INFO] [events_orders] order 549d760c-607d-406f-830e-4da27232030c HAPPENED!
[2025-02-20 17:16:02,335] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='e997fd47-96e6-4806-b511-8e19e132c553', order_request_id='549d760c-607d-406f-830e-4da27232030c', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=115000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=120000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:16:02,431] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='549d760c-607d-406f-830e-4da27232030c', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='e997fd47-96e6-4806-b511-8e19e132c553')
[2025-02-20 17:16:06,737] [INFO] [get_data] Last operation Operation(id='2041006194642385590', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=373, nano=300000000), price=MoneyValue(currency='pt.', units=4, nano=128000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 16, 2, 282949, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641885029', date_time=datetime.datetime(2025, 2, 20, 14, 16, 2, 282949, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=128000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 17:16:06,739] [INFO] [get_data]. Price of last operation: 4.12800000
[2025-02-20 17:16:06,739] [INFO] [futures_quantity] -1
[2025-02-20 17:16:06,740] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=128000000),)
[2025-02-20 17:16:08,031] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='e8f62080-d79e-4b5e-8dd5-d5b40d3b4705', order_request_id='', response_metadata=ResponseMetadata(tracking_id='f6e98e5ccec4c600f41b137799277e2d', server_time=datetime.datetime(2025, 2, 20, 14, 16, 7, 930240, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='7c6ffa64-996c-4419-9614-05e2188b99c2', order_request_id='', response_metadata=ResponseMetadata(tracking_id='e90e086b68e7d3b874446c4d3d090c65', server_time=datetime.datetime(2025, 2, 20, 14, 16, 7, 962847, tzinfo=datetime.timezone.utc))))
[2025-02-20 17:16:43,286] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 17:16:43,286] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='7c6ffa64-996c-4419-9614-05e2188b99c2', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=154000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=375, nano=650000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:16:47,584] [INFO] [get_data] Last operation Operation(id='2041006194642386684', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-374, nano=-650000000), price=MoneyValue(currency='pt.', units=4, nano=143000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 16, 43, 212036, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641885036', date_time=datetime.datetime(2025, 2, 20, 14, 16, 43, 212036, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=143000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:16:47,586] [INFO] [get_data]. Price of last operation: 4.14300000
[2025-02-20 17:16:47,586] [INFO] [futures_quantity] 0
[2025-02-20 17:16:47,586] [INFO] [orders_prices] ()
[2025-02-20 17:18:08,801] [INFO] [events_orders] order 5e01a051-5254-48ef-866d-2fb69b13ac1d HAPPENED!
[2025-02-20 17:18:08,801] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='6ebe38e7-21de-49a1-ab0f-f53b5119be10', order_request_id='5e01a051-5254-48ef-866d-2fb69b13ac1d', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=120000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=570000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:18:08,919] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='5e01a051-5254-48ef-866d-2fb69b13ac1d', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='6ebe38e7-21de-49a1-ab0f-f53b5119be10')
[2025-02-20 17:18:13,164] [INFO] [get_data] Last operation Operation(id='2041006194642386684', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-374, nano=-650000000), price=MoneyValue(currency='pt.', units=4, nano=143000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 16, 43, 212036, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641885036', date_time=datetime.datetime(2025, 2, 20, 14, 16, 43, 212036, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=143000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:18:13,164] [INFO] [get_data]. Price of last operation: 4.14300000
[2025-02-20 17:18:13,165] [INFO] [futures_quantity] -1
[2025-02-20 17:18:13,165] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=143000000),)
[2025-02-20 17:18:14,671] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='ecc07aa5-840d-420b-9c78-1939c493f397', order_request_id='', response_metadata=ResponseMetadata(tracking_id='0c3b601982675903aa38b14c69f8df6d', server_time=datetime.datetime(2025, 2, 20, 14, 18, 14, 487064, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='fb68e1ab-4af5-4279-a1b8-3497b9735672', order_request_id='', response_metadata=ResponseMetadata(tracking_id='3c6acb4c97826f01887bfa3cedd0a136', server_time=datetime.datetime(2025, 2, 20, 14, 18, 14, 603242, tzinfo=datetime.timezone.utc))))
[2025-02-20 17:20:14,693] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,694] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,694] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,694] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,694] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,694] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,695] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,695] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,695] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,695] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,695] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,696] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,696] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,697] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,697] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,697] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,698] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:20:14,698] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:26:35,647] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 17:26:35,650] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='fb68e1ab-4af5-4279-a1b8-3497b9735672', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=169000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=377, nano=0), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:26:40,041] [INFO] [get_data] Last operation Operation(id='2041006194642395690', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-375, nano=-830000000), price=MoneyValue(currency='pt.', units=4, nano=156000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 26, 35, 586736, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641885216', date_time=datetime.datetime(2025, 2, 20, 14, 26, 35, 586736, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=156000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:26:40,042] [INFO] [get_data]. Price of last operation: 4.15600000
[2025-02-20 17:26:40,044] [INFO] [futures_quantity] 0
[2025-02-20 17:26:40,044] [INFO] [orders_prices] ()
[2025-02-20 17:31:02,266] [INFO] [events_orders] order 30057074-ae02-469f-b71e-5948f3584a6f HAPPENED!
[2025-02-20 17:31:02,266] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='edcc0d11-8f6f-459b-b650-5180ccfb827c', order_request_id='30057074-ae02-469f-b71e-5948f3584a6f', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=117000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=300000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:31:02,390] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='30057074-ae02-469f-b71e-5948f3584a6f', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='edcc0d11-8f6f-459b-b650-5180ccfb827c')
[2025-02-20 17:31:06,876] [INFO] [get_data] Last operation Operation(id='2041006194642398702', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=373, nano=480000000), price=MoneyValue(currency='pt.', units=4, nano=130000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 31, 2, 243805, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641885369', date_time=datetime.datetime(2025, 2, 20, 14, 31, 2, 243805, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=130000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:31:06,876] [INFO] [get_data]. Price of last operation: 4.13000000
[2025-02-20 17:31:06,876] [INFO] [futures_quantity] -1
[2025-02-20 17:31:06,876] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=130000000),)
[2025-02-20 17:31:08,026] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='143a69fd-0164-44f0-8f64-6a5ceda2d0d0', order_request_id='', response_metadata=ResponseMetadata(tracking_id='b10cab772e3bea18e40623778a924b50', server_time=datetime.datetime(2025, 2, 20, 14, 31, 7, 956010, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='84162ab0-f572-4ec3-a577-c33a56501039', order_request_id='', response_metadata=ResponseMetadata(tracking_id='688dba88fd5eef8cc70d90f25d0afcc6', server_time=datetime.datetime(2025, 2, 20, 14, 31, 7, 916791, tzinfo=datetime.timezone.utc))))
[2025-02-20 17:32:40,721] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 17:32:40,721] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='84162ab0-f572-4ec3-a577-c33a56501039', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=156000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=375, nano=830000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:32:47,998] [INFO] [get_data] Last operation Operation(id='2041006194642401314', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-374, nano=-650000000), price=MoneyValue(currency='pt.', units=4, nano=143000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 32, 40, 648946, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641885408', date_time=datetime.datetime(2025, 2, 20, 14, 32, 40, 648946, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=143000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:32:47,998] [INFO] [get_data]. Price of last operation: 4.14300000
[2025-02-20 17:32:47,999] [INFO] [futures_quantity] 0
[2025-02-20 17:32:47,999] [INFO] [orders_prices] ()
[2025-02-20 17:33:08,738] [INFO] [events_orders] order 0b3d9f34-fa70-40c5-b0b1-a70085e4ba2b HAPPENED!
[2025-02-20 17:33:08,738] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='ecf6c0d5-cf7c-47d9-9896-4a86244b39d7', order_request_id='0b3d9f34-fa70-40c5-b0b1-a70085e4ba2b', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=130000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=373, nano=480000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:33:08,808] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='0b3d9f34-fa70-40c5-b0b1-a70085e4ba2b', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='ecf6c0d5-cf7c-47d9-9896-4a86244b39d7')
[2025-02-20 17:33:13,008] [INFO] [get_data] Last operation Operation(id='2041006194642401922', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=374, nano=650000000), price=MoneyValue(currency='pt.', units=4, nano=143000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 33, 8, 663035, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641885413', date_time=datetime.datetime(2025, 2, 20, 14, 33, 8, 663035, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=143000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:33:13,009] [INFO] [get_data]. Price of last operation: 4.14300000
[2025-02-20 17:33:13,009] [INFO] [futures_quantity] -1
[2025-02-20 17:33:13,009] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=143000000),)
[2025-02-20 17:33:14,438] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='caccc2bd-8fbd-4cc3-894c-b7c0a00a47fc', order_request_id='', response_metadata=ResponseMetadata(tracking_id='56dd32cb1e46886b04add7cba650dbb5', server_time=datetime.datetime(2025, 2, 20, 14, 33, 14, 367301, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='ad059ffb-ef7b-471d-88d9-df1e5e710880', order_request_id='', response_metadata=ResponseMetadata(tracking_id='44d7e84e713c82a04a18326f32fb4ca0', server_time=datetime.datetime(2025, 2, 20, 14, 33, 14, 309787, tzinfo=datetime.timezone.utc))))
[2025-02-20 17:34:02,487] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 17:34:02,487] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='caccc2bd-8fbd-4cc3-894c-b7c0a00a47fc', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=134000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=373, nano=840000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:34:06,868] [INFO] [get_data] Last operation Operation(id='2041006194642401922', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=374, nano=650000000), price=MoneyValue(currency='pt.', units=4, nano=143000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 33, 8, 663035, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641885413', date_time=datetime.datetime(2025, 2, 20, 14, 33, 8, 663035, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=143000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 17:34:06,868] [INFO] [get_data]. Price of last operation: 4.14300000
[2025-02-20 17:34:06,868] [INFO] [futures_quantity] 0
[2025-02-20 17:34:06,869] [INFO] [orders_prices] ()
[2025-02-20 17:35:15,146] [INFO] [events_orders] order 3c9995cf-02a7-419c-a1c0-aa7491acf1e3 HAPPENED!
[2025-02-20 17:35:15,146] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='0e190f3b-88e0-4616-9185-bd80923f8b47', order_request_id='3c9995cf-02a7-419c-a1c0-aa7491acf1e3', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=124000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=930000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:35:15,232] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='3c9995cf-02a7-419c-a1c0-aa7491acf1e3', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='0e190f3b-88e0-4616-9185-bd80923f8b47')
[2025-02-20 17:35:19,387] [INFO] [get_data] Last operation Operation(id='2041006194642404441', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=374, nano=110000000), price=MoneyValue(currency='pt.', units=4, nano=137000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 35, 15, 81822, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641885443', date_time=datetime.datetime(2025, 2, 20, 14, 35, 15, 81822, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=137000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 17:35:19,388] [INFO] [get_data]. Price of last operation: 4.13700000
[2025-02-20 17:35:19,388] [INFO] [futures_quantity] -1
[2025-02-20 17:35:19,388] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=137000000),)
[2025-02-20 17:35:20,886] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='b2b22c62-aaef-41eb-b212-193acefac260', order_request_id='', response_metadata=ResponseMetadata(tracking_id='cb593ec0163aa7adcb1ddfc961e0f6d9', server_time=datetime.datetime(2025, 2, 20, 14, 35, 20, 813959, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='f4bf0e5f-c623-40b8-a215-aa9e2391cc67', order_request_id='', response_metadata=ResponseMetadata(tracking_id='5b6032128bc95358a93ec1ae1a27b587', server_time=datetime.datetime(2025, 2, 20, 14, 35, 20, 772246, tzinfo=datetime.timezone.utc))))
[2025-02-20 17:37:20,909] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:37:20,909] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:37:20,910] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 17:39:27,725] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 17:39:27,725] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='b2b22c62-aaef-41eb-b212-193acefac260', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=114000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=30000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 17:39:32,086] [INFO] [get_data] Last operation Operation(id='2041006194642411409', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-371, nano=-850000000), price=MoneyValue(currency='pt.', units=4, nano=112000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 14, 39, 27, 635383, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641885635', date_time=datetime.datetime(2025, 2, 20, 14, 39, 27, 635383, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=112000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 17:39:32,086] [INFO] [get_data]. Price of last operation: 4.11200000
[2025-02-20 17:39:32,087] [INFO] [futures_quantity] 0
[2025-02-20 17:39:32,087] [INFO] [orders_prices] ()
[2025-02-20 18:15:03,268] [INFO] [events_orders] order a44b41dd-6f32-4d11-9ed3-e842eb25a2a3 HAPPENED!
[2025-02-20 18:15:03,275] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='7dd04bb4-0d6c-4472-b147-6fd18a3c529c', order_request_id='a44b41dd-6f32-4d11-9ed3-e842eb25a2a3', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=117000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=372, nano=300000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 18:15:03,350] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='a44b41dd-6f32-4d11-9ed3-e842eb25a2a3', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='7dd04bb4-0d6c-4472-b147-6fd18a3c529c')
[2025-02-20 18:15:07,971] [INFO] [get_data] Last operation Operation(id='2041006194642449878', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=373, nano=480000000), price=MoneyValue(currency='pt.', units=4, nano=130000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 15, 15, 3, 208278, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641886563', date_time=datetime.datetime(2025, 2, 20, 15, 15, 3, 208278, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=130000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 18:15:07,971] [INFO] [get_data]. Price of last operation: 4.13000000
[2025-02-20 18:15:07,973] [INFO] [futures_quantity] -1
[2025-02-20 18:15:07,973] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=130000000),)
[2025-02-20 18:15:09,022] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='25777e5a-3c37-45e6-b51a-c02c4e274313', order_request_id='', response_metadata=ResponseMetadata(tracking_id='7e770d0e83954bdc6b9b37ebd35359dc', server_time=datetime.datetime(2025, 2, 20, 15, 15, 8, 964050, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='cabd4784-6ffe-4178-b584-bd99c40c4246', order_request_id='', response_metadata=ResponseMetadata(tracking_id='921099f8f54c142dc792696474d3508a', server_time=datetime.datetime(2025, 2, 20, 15, 15, 8, 894368, tzinfo=datetime.timezone.utc))))
[2025-02-20 18:17:09,037] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 18:17:09,037] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 18:23:30,994] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 18:23:31,004] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='cabd4784-6ffe-4178-b584-bd99c40c4246', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=156000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=375, nano=830000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 18:23:35,555] [INFO] [get_data] Last operation Operation(id='2041006194642456630', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-375, nano=-100000000), price=MoneyValue(currency='pt.', units=4, nano=148000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 15, 23, 30, 913021, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641886632', date_time=datetime.datetime(2025, 2, 20, 15, 23, 30, 913021, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=148000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 18:23:35,559] [INFO] [get_data]. Price of last operation: 4.14800000
[2025-02-20 18:23:35,565] [INFO] [futures_quantity] 0
[2025-02-20 18:23:35,565] [INFO] [orders_prices] ()
[2025-02-20 18:33:18,934] [INFO] [events_orders] order 9a94a2c9-5942-4ff2-8c1f-a0f8b66fc188 HAPPENED!
[2025-02-20 18:33:18,935] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='6ddcd15e-fbfb-4cfc-a3a5-9cba78c69d7d', order_request_id='9a94a2c9-5942-4ff2-8c1f-a0f8b66fc188', client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_SELL: 2>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=108000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=371, nano=490000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 18:33:18,985] [INFO] [o_p_w_s] PostOrderAsyncResponse(order_request_id='9a94a2c9-5942-4ff2-8c1f-a0f8b66fc188', execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, trade_intent_id='6ddcd15e-fbfb-4cfc-a3a5-9cba78c69d7d')
[2025-02-20 18:33:23,256] [INFO] [get_data] Last operation Operation(id='2041006194642474172', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=372, nano=660000000), price=MoneyValue(currency='pt.', units=4, nano=121000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 15, 33, 18, 842981, tzinfo=datetime.timezone.utc), type='Продажа ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_SELL: 22>, trades=[OperationTrade(trade_id='2041006194641887058', date_time=datetime.datetime(2025, 2, 20, 15, 33, 18, 842981, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=121000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[ChildOperationItem(instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', payment=MoneyValue(currency='rub', units=0, nano=-90000000))])
[2025-02-20 18:33:23,257] [INFO] [get_data]. Price of last operation: 4.12100000
[2025-02-20 18:33:23,258] [INFO] [futures_quantity] -1
[2025-02-20 18:33:23,258] [INFO] [orders_prices] (MoneyValue(currency='pt.', units=4, nano=121000000),)
[2025-02-20 18:33:24,620] [INFO] [o_p_w_s] stop_orders are applied.
 (PostStopOrderResponse(stop_order_id='f7d462a7-139a-47ef-aa54-ff6496395cfa', order_request_id='', response_metadata=ResponseMetadata(tracking_id='cf900533e0aed6d05ccf11ce5be5e89d', server_time=datetime.datetime(2025, 2, 20, 15, 33, 24, 551639, tzinfo=datetime.timezone.utc))), PostStopOrderResponse(stop_order_id='1cef783c-bf9e-4592-b0c1-b1e928b70029', order_request_id='', response_metadata=ResponseMetadata(tracking_id='c4037065d5b5d1246e21e89f993936fc', server_time=datetime.datetime(2025, 2, 20, 15, 33, 24, 509349, tzinfo=datetime.timezone.utc))))
[2025-02-20 18:35:21,564] [INFO] [events_orders] order None HAPPENED!
[2025-02-20 18:35:21,565] [INFO] [order state] OrderStateStreamResponse(order_state=OrderStateStreamOrderState(order_id='f7d462a7-139a-47ef-aa54-ff6496395cfa', order_request_id=None, client_code='', created_at=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), execution_report_status=<OrderExecutionReportStatus.EXECUTION_REPORT_STATUS_NEW: 4>, status_info=<StatusCauseInfo.CAUSE_UNSPECIFIED: 0>, ticker='NRG5', class_code='SPBFUT', lot_size=1, direction=<OrderDirection.ORDER_DIRECTION_BUY: 1>, time_in_force=<TimeInForceType.TIME_IN_FORCE_DAY: 1>, order_type=<OrderType.ORDER_TYPE_MARKET: 2>, account_id='2222220063', initial_order_price=MoneyValue(currency='RUB', units=4, nano=109000000), order_price=MoneyValue(currency='RUB', units=0, nano=0), amount=MoneyValue(currency='RUB', units=371, nano=580000000), executed_order_price=MoneyValue(currency='RUB', units=0, nano=0), currency='RUB', lots_requested=1, lots_executed=0, lots_left=0, lots_cancelled=0, marker=<MarkerType.MARKER_UNKNOWN: 0>, trades=[], completion_time=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), exchange='MOEX', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4'), ping=None, subscription=None)
[2025-02-20 18:35:24,626] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 18:35:24,627] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 18:35:24,627] [INFO] [o_p_w_s] The deal cannot commit. quantity = 0
[2025-02-20 18:35:25,843] [INFO] [get_data] Last operation Operation(id='2041006194642479086', parent_operation_id='', currency='rub', payment=MoneyValue(currency='rub', units=-371, nano=-580000000), price=MoneyValue(currency='pt.', units=4, nano=109000000), state=<OperationState.OPERATION_STATE_EXECUTED: 1>, quantity=1, quantity_rest=0, figi='FUTNGM022500', instrument_type='futures', date=datetime.datetime(2025, 2, 20, 15, 35, 20, 686035, tzinfo=datetime.timezone.utc), type='Покупка ценных бумаг', operation_type=<OperationType.OPERATION_TYPE_BUY: 15>, trades=[OperationTrade(trade_id='2041006194641887254', date_time=datetime.datetime(2025, 2, 20, 15, 35, 20, 686035, tzinfo=datetime.timezone.utc), quantity=1, price=MoneyValue(currency='rub', units=4, nano=109000000))], asset_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', position_uid='1fa4b56d-4a86-4b2f-8127-c4d0e3a47a63', instrument_uid='afbc7c40-fe28-465b-80ee-2f047bd691e4', child_operations=[])
[2025-02-20 18:35:25,844] [INFO] [get_data]. Price of last operation: 4.10900000
[2025-02-20 18:35:25,844] [INFO] [futures_quantity] 0
[2025-02-20 18:35:25,844] [INFO] [orders_prices] ()
[2025-02-20 19:02:44,778] [ERROR] Error in stream processing: <class 'tinkoff.invest.exceptions.AioRequestError'> (<StatusCode.UNAVAILABLE: (14, 'unavailable')>, 'IOCP/Socket: Connection aborted (An established connection was aborted by the software in your host machine.\r\n -- 10053)', Metadata(tracking_id=None, ratelimit_limit='100, 100;w=60', ratelimit_remaining=99, ratelimit_reset=49, message=None))
[2025-02-20 19:02:44,783] [INFO] Will retry after 60 seconds...
